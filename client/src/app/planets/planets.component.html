<div class="flex flex-column h-100">
    <app-header (changeView)="selectedView = $event" (planetAction)="getPlanetAction($event)"
        [page]="Page.List"></app-header>
    <div class="flex p-25 planets-main-block">
        @if (selectedView === ViewType.List) {
        <div class="flex align-items-start w-100">
            <table border="1" class="planets-table">
                <thead>
                    <tr>
                        @for (column of columns; track column) {
                        <th class="font-12-regular" [ngClass]="{'name-column': column.field === 'planetName'}"
                            (click)="sortBy(column.field, column.display)">
                            {{ column.display }}
                            <span *ngIf="sortColumn === column.field">
                                {{ sortDirection === 'asc' ? '▲' : '▼' }}
                            </span>
                        </th>
                        }
                    </tr>
                </thead>
                <tbody>
                    @for (planet of planets; track planet) {
                    <tr (click)="openPlanetDetails(planet)">
                        @for (column of columns; track column) {
                        <td>
                            @if (column.field === 'planetName') {
                            <div class="flex align-items-center gap-10">
                                <img [src]="planet.imageUrl" class="planet-image" />
                                <div class="flex flex-column">
                                    <span class="font-16-regular"> {{ planet[column.field] }} </span>
                                    <span class="font-12-regular planet-description gray-base-color"> {{
                                        planet.description }} </span>
                                </div>
                            </div>
                            } @else if (column.field === 'distInMillionsKM') {
                            {{ column.display === 'Dist Sun' ? planet[column.field].fromSun :
                            planet[column.field].fromEarth}}
                            } @else {
                            <span> {{ planet[column.field] }} </span>
                            }
                        </td>
                        }
                    </tr>
                    }
                </tbody>
            </table>
        </div>
        } @else {
        <div class="flex align-items-center justify-content-center w-100 gap-10 planets-grid">
            @for (planet of planets; track planet) {
            <div class="flex flex-column align-items-center justify-content-between one-grid"
                (click)="openPlanetDetails(planet)">
                <div class="flex flex-column align-items-center gap-25">
                    <img [src]="planet.imageUrl" class="planet-image" />
                    <span class="font-36-bold"> {{ planet.planetName }} </span>
                    <span class="font-14-regular planet-description gray-base-color"> {{ planet.description }} </span>
                </div>
                <div class="flex flex-column align-items-center gap-25 w-100">
                    <div class="flex align-items-center justify-content-between w-100">
                        <div class="flex flex-column gap-5">
                            <span class="font-16-semi-bold"> {{ planet.planetColor }} </span>
                            <span class="font-12-regular gray-base-color"> Color </span>
                        </div>
                        <div class="flex flex-column gap-5">
                            <span class="font-16-semi-bold"> {{ planet.distInMillionsKM.fromSun }} </span>
                            <span class="font-12-regular gray-base-color"> Dist. from Sun </span>
                        </div>
                    </div>
                    <div class="flex align-items-center justify-content-between w-100">
                        <div class="flex flex-column gap-5">
                            <span class="font-16-semi-bold"> {{ planet.planetRadiusKM }} </span>
                            <span class="font-12-regular gray-base-color"> Radius in km </span>
                        </div>
                        <div class="flex flex-column gap-5">
                            <span class="font-16-semi-bold"> {{ planet.distInMillionsKM.fromEarth }} </span>
                            <span class="font-12-regular gray-base-color"> Dist. from Earth </span>
                        </div>
                    </div>
                </div>
            </div>
            }
        </div>
        }
    </div>
</div>

@if (isOpenedPlanetActions) {
<div class="dialog-box">
    <app-planet-actions (closeDialog)="closeDialog($event)"></app-planet-actions>
</div>
}